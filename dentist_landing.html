<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="light only">
    <meta name="supported-color-schemes" content="light only">
    <title>ìì–‘ì—­ 5ë¶„, 40í‰ ì¹˜ê³¼ ì „ìš© ê³µê°„ ì„ëŒ€</title>

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XT1H1Z69G2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XT1H1Z69G2');
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a1a1a;
            --secondary: #666;
            --accent: #c9a87c;
            --bg: #fafafa;
            --white: #ffffff;
            --border: #e5e5e5;
        }

        html {
            scroll-behavior: smooth;
            color-scheme: light only;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--primary);
            background: var(--bg);
            -webkit-font-smoothing: antialiased;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px 24px;
            background: linear-gradient(180deg, #f5f5f5 0%, #fafafa 100%);
        }

        .hero-badge {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary);
            color: var(--white);
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 2px;
            margin-bottom: 24px;
        }

        .hero h1 {
            font-size: 2rem;
            font-weight: 300;
            letter-spacing: -0.5px;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .hero h1 strong {
            font-weight: 600;
        }

        .hero-subtitle {
            font-size: 0.95rem;
            color: var(--secondary);
            margin-bottom: 40px;
        }

        .hero-specs {
            display: flex;
            gap: 32px;
            margin-bottom: 50px;
            justify-content: center;
        }

        .spec-item {
            text-align: center;
        }

        .spec-value {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
        }

        .spec-label {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: 4px;
        }

        .scroll-indicator {
            margin-top: 30px;
            animation: bounce 2s infinite;
        }

        .scroll-indicator span {
            display: block;
            width: 20px;
            height: 20px;
            border-right: 2px solid var(--secondary);
            border-bottom: 2px solid var(--secondary);
            transform: rotate(45deg);
            margin: 0 auto;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(8px); }
            60% { transform: translateY(4px); }
        }

        /* Section Common */
        section {
            padding: 60px 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 12px;
        }

        .section-desc {
            text-align: center;
            color: var(--secondary);
            margin-bottom: 40px;
            font-size: 0.9rem;
        }

        /* Space Info */
        .space-info {
            background: var(--white);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .info-card {
            padding: 24px 16px;
            background: var(--bg);
            text-align: center;
            border-radius: 12px;
        }

        .info-card-icon {
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        .info-card h3 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .info-card p {
            font-size: 0.8rem;
            color: var(--secondary);
            line-height: 1.5;
        }

        /* Video Section */
        .video-section {
            background: var(--bg);
        }

        .video-wrapper {
            position: relative;
            width: 100%;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .video-wrapper video {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Possibilities - í’€ìŠ¤í¬ë¦° ì´ë¯¸ì§€ */
        .possibilities {
            background: var(--bg);
            padding: 60px 0;
        }

        .possibilities .container {
            padding: 0 20px;
        }

        .gallery {
            display: flex;
            flex-direction: column;
            gap: 24px;
            margin-top: 40px;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            aspect-ratio: 4/5;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 60px 24px 24px;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: var(--white);
        }

        .gallery-overlay h4 {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .gallery-overlay p {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.5;
        }

        /* Rent Info - ëª¨ë˜/ë¯¸ë‹ˆë©€ */
        .rent-info {
            background: var(--bg);
        }

        .rent-table {
            background: var(--white);
            border-radius: 16px;
            padding: 8px 0;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        }

        .rent-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 24px;
            border-bottom: 1px solid var(--border);
        }

        .rent-row:last-child {
            border-bottom: none;
        }

        .rent-label {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        .rent-value {
            font-weight: 500;
            font-size: 0.95rem;
            text-align: right;
            color: var(--primary);
        }

        .rent-value.highlight {
            color: var(--primary);
            font-size: 1.15rem;
            font-weight: 600;
        }

        .rent-value.special {
            color: #c9a87c;
            font-size: 1.15rem;
            font-weight: 700;
        }

        /* CTA */
        .cta {
            background: var(--white);
            text-align: center;
            padding-bottom: 80px;
        }

        .cta-box {
            background: var(--bg);
            padding: 40px 24px;
            border-radius: 16px;
        }

        .cta-phone {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--primary);
            margin: 16px 0;
            letter-spacing: 0.5px;
        }

        .cta-phone a {
            color: inherit;
            text-decoration: none;
        }

        .cta-note {
            font-size: 0.85rem;
            color: var(--secondary);
        }

        .cta-btn {
            display: block;
            margin-top: 24px;
            padding: 18px 40px;
            background: var(--primary);
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .cta-btn:active {
            background: #333;
        }

        /* Footer */
        footer {
            padding: 30px 20px 40px;
            text-align: center;
            background: var(--bg);
            color: var(--secondary);
            font-size: 0.8rem;
        }

        footer .address {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        /* ì´ë¯¸ì§€ ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            position: relative;
            max-width: 100%;
            max-height: 100%;
        }

        .modal-content img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 8px;
        }

        .modal-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
        }

        .modal-caption {
            color: white;
            text-align: center;
            margin-top: 16px;
            font-size: 1rem;
        }

        /* ë°ìŠ¤í¬íƒ‘ */
        @media (min-width: 768px) {
            .hero h1 {
                font-size: 2.8rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .hero-specs {
                gap: 50px;
            }

            .spec-value {
                font-size: 1.8rem;
            }

            .container {
                max-width: 600px;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .info-grid {
                gap: 20px;
            }

            .info-card {
                padding: 32px 20px;
            }

            .gallery-item {
                aspect-ratio: 16/10;
            }

            .gallery-overlay h4 {
                font-size: 1.5rem;
            }

            .cta-phone {
                font-size: 2rem;
            }

            .cta-btn {
                display: inline-block;
                width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Hero -->
    <section class="hero">
        <div class="hero-badge">DENTAL CLINIC</div>
        <h1><strong>ì¹˜ê³¼ ê°œì›</strong>ì„ ìœ„í•œ<br>ìµœì ì˜ ê³µê°„</h1>
        <p class="hero-subtitle">ìì–‘ì—­ 5ë¶„ Â· 40í‰ Â· ë ŒíŠ¸í”„ë¦¬ 3ê°œì›”</p>

        <div class="hero-specs">
            <div class="spec-item">
                <div class="spec-value">40í‰</div>
                <div class="spec-label">ì „ìš©ë©´ì </div>
            </div>
            <div class="spec-item">
                <div class="spec-value">5ë¶„</div>
                <div class="spec-label">ìì–‘ì—­ ë„ë³´</div>
            </div>
            <div class="spec-item">
                <div class="spec-value">3ê°œì›”</div>
                <div class="spec-label">ë ŒíŠ¸í”„ë¦¬</div>
            </div>
        </div>

        <div class="scroll-indicator">
            <span></span>
        </div>
    </section>

    <!-- Space Info -->
    <section class="space-info">
        <div class="container">
            <h2 class="section-title">ê³µê°„ì˜ íŠ¹ì§•</h2>
            <p class="section-desc">ì¹˜ê³¼ ê°œì›ì— ìµœì í™”ëœ í™˜ê²½</p>

            <div class="info-grid">
                <div class="info-card">
                    <div class="info-card-icon">ğŸš‡</div>
                    <h3>ì—­ì„¸ê¶Œ</h3>
                    <p>ìì–‘ì—­ ë„ë³´ 5ë¶„<br>í™˜ì ì ‘ê·¼ì„± ìš°ìˆ˜</p>
                </div>
                <div class="info-card">
                    <div class="info-card-icon">ğŸ“</div>
                    <h3>ë„“ì€ ê³µê°„</h3>
                    <p>40í‰ì˜ ì—¬ìœ <br>ì§„ë£Œì‹¤ 4ê°œ ì´ìƒ</p>
                </div>
                <div class="info-card">
                    <div class="info-card-icon">ğŸ¨</div>
                    <h3>ììœ  ì„¤ê³„</h3>
                    <p>ì˜¬ì² ê±° ì™„ë£Œ<br>ì›í•˜ëŠ” ëŒ€ë¡œ</p>
                </div>
                <div class="info-card">
                    <div class="info-card-icon">ğŸ¢</div>
                    <h3>ëŒ€ë¡œë³€</h3>
                    <p>ê°„íŒ ì‹œì¸ì„±<br>í™ë³´ íš¨ê³¼</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Video Section -->
    <section class="video-section">
        <div class="container">
            <h2 class="section-title">ìµœê³ ì˜ ì¹˜ê³¼ì˜ë¥¼ ëª¨ì‹­ë‹ˆë‹¤</h2>
            <p class="section-desc">ë‹¹ì‹ ì˜ ì¹˜ê³¼ê°€ ë  ê³µê°„ì…ë‹ˆë‹¤</p>

            <div class="video-wrapper">
                <video controls playsinline>
                    <source src="jayang_dentist.mp4" type="video/mp4">
                    ë¸Œë¼ìš°ì €ê°€ ë¹„ë””ì˜¤ ì¬ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </video>
            </div>
        </div>
    </section>

    <!-- Rent Info -->
    <section class="rent-info">
        <div class="container">
            <h2 class="section-title">ì„ëŒ€ ì¡°ê±´</h2>
            <p class="section-desc">í•©ë¦¬ì ì¸ ì¡°ê±´ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”</p>

            <div class="rent-table">
                <div class="rent-row">
                    <span class="rent-label">ìœ„ì¹˜</span>
                    <span class="rent-value">ìì–‘ë™ ëŠ¥ë™ë¡œ31, 2ì¸µ</span>
                </div>
                <div class="rent-row">
                    <span class="rent-label">ë©´ì </span>
                    <span class="rent-value">40í‰ (ì „ìš©)</span>
                </div>
                <div class="rent-row">
                    <span class="rent-label">ë³´ì¦ê¸ˆ</span>
                    <span class="rent-value highlight">5,000ë§Œì›</span>
                </div>
                <div class="rent-row">
                    <span class="rent-label">ì›”ì„¸</span>
                    <span class="rent-value highlight">250ë§Œì›</span>
                </div>
                <div class="rent-row">
                    <span class="rent-label">ë ŒíŠ¸í”„ë¦¬</span>
                    <span class="rent-value special">3ê°œì›”</span>
                </div>
                <div class="rent-row">
                    <span class="rent-label">ê´€ë¦¬ë¹„</span>
                    <span class="rent-value">í˜‘ì˜</span>
                </div>
                <div class="rent-row">
                    <span class="rent-label">ì…ì  ê°€ëŠ¥</span>
                    <span class="rent-value">ì¦‰ì‹œ ê°€ëŠ¥</span>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta">
        <div class="container">
            <div class="cta-box">
                <h2 class="section-title">ë¬¸ì˜í•˜ê¸°</h2>
                <p class="section-desc">ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ì—°ë½ì£¼ì„¸ìš”</p>

                <div class="cta-phone">
                    <a href="tel:010-8963-8889">010-8963-8889</a>
                </div>
                <div class="cta-phone">
                    <a href="tel:010-7415-7221">010-7415-7221</a>
                </div>
                <p class="cta-note">í‰ì¼ 09:00 - 18:00</p>

                <a href="tel:010-8963-8889" class="cta-btn">ì „í™” ë¬¸ì˜í•˜ê¸°</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p class="address">ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬ ìì–‘ë™ 553-264<br>(ëŠ¥ë™ë¡œ31) 2ì¸µ</p>
        <p>Â© 2026 All rights reserved.</p>
    </footer>

    <!-- ì´ë¯¸ì§€ ëª¨ë‹¬ -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">âœ•</span>
            <img id="modalImage" src="" alt="">
            <p class="modal-caption" id="modalCaption"></p>
        </div>
    </div>

    <script>
        // ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('click', function() {
                const img = this.querySelector('img');
                const title = this.querySelector('h4').textContent;

                document.getElementById('modalImage').src = img.src;
                document.getElementById('modalCaption').textContent = title;
                document.getElementById('imageModal').classList.add('active');
                document.body.style.overflow = 'hidden';
            });
        });

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('imageModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // ESC í‚¤ë¡œ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ============================================
        // GA4 í’€ ì¶”ì  (ì¸¡ì • ê°€ëŠ¥í•œ ëª¨ë“  ê²ƒ)
        // ============================================

        (function() {
            var pageLoadTime = Date.now();
            var firstInteraction = false;
            var maxScrollPercent = 0;
            var activeTime = 0;
            var activeInterval = null;
            var isPageVisible = true;

            // --- ìœ í‹¸ ---
            function trackEvent(name, params) {
                if (typeof gtag === 'function') gtag('event', name, params || {});
            }

            function trackFirstInteraction(type) {
                if (firstInteraction) return;
                firstInteraction = true;
                trackEvent('first_interaction', {
                    interaction_type: type,
                    time_to_interact_sec: Math.round((Date.now() - pageLoadTime) / 1000)
                });
            }

            // =========================================
            // 1. í˜ì´ì§€ ë¡œë“œ ì„±ëŠ¥
            // =========================================
            window.addEventListener('load', function() {
                var perf = performance.getEntriesByType('navigation')[0];
                if (perf) {
                    trackEvent('page_performance', {
                        dns_ms: Math.round(perf.domainLookupEnd - perf.domainLookupStart),
                        connect_ms: Math.round(perf.connectEnd - perf.connectStart),
                        ttfb_ms: Math.round(perf.responseStart - perf.requestStart),
                        dom_ready_ms: Math.round(perf.domContentLoadedEventEnd - perf.startTime),
                        full_load_ms: Math.round(perf.loadEventEnd - perf.startTime)
                    });
                }
            });

            // =========================================
            // 2. ë°©ë¬¸ì ìœ í˜• (ì‹ ê·œ vs ì¬ë°©ë¬¸)
            // =========================================
            var visitCount = parseInt(localStorage.getItem('dentist_visits') || '0') + 1;
            localStorage.setItem('dentist_visits', visitCount);
            var lastVisit = localStorage.getItem('dentist_last_visit');
            localStorage.setItem('dentist_last_visit', new Date().toISOString());

            trackEvent('visitor_info', {
                visitor_type: visitCount === 1 ? 'new' : 'returning',
                visit_count: visitCount,
                days_since_last: lastVisit ? Math.round((Date.now() - new Date(lastVisit).getTime()) / 86400000) : 0
            });

            // =========================================
            // 3. ê¸°ê¸° & í™˜ê²½ ì •ë³´
            // =========================================
            var conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            trackEvent('device_info', {
                screen_width: screen.width,
                screen_height: screen.height,
                viewport_width: window.innerWidth,
                viewport_height: window.innerHeight,
                pixel_ratio: window.devicePixelRatio || 1,
                orientation: screen.orientation ? screen.orientation.type : (window.innerWidth > window.innerHeight ? 'landscape' : 'portrait'),
                connection_type: conn ? conn.effectiveType : 'unknown',
                language: navigator.language,
                platform: navigator.platform,
                touch_support: 'ontouchstart' in window
            });

            // =========================================
            // 4. UTM íŒŒë¼ë¯¸í„° ìº¡ì²˜ (ê´‘ê³  íš¨ê³¼ ì¸¡ì •)
            // =========================================
            var urlParams = new URLSearchParams(window.location.search);
            var utmSource = urlParams.get('utm_source');
            if (utmSource) {
                trackEvent('campaign_visit', {
                    utm_source: utmSource,
                    utm_medium: urlParams.get('utm_medium') || '',
                    utm_campaign: urlParams.get('utm_campaign') || '',
                    utm_term: urlParams.get('utm_term') || '',
                    utm_content: urlParams.get('utm_content') || ''
                });
            }

            // =========================================
            // 5. ì „í™” ë²„íŠ¼ í´ë¦­
            // =========================================
            document.querySelectorAll('a[href^="tel:"]').forEach(function(link) {
                link.addEventListener('click', function() {
                    trackFirstInteraction('phone_click');
                    trackEvent('phone_click', {
                        event_category: 'conversion',
                        button_location: this.closest('section') ? this.closest('section').className : 'unknown',
                        time_on_page_sec: Math.round((Date.now() - pageLoadTime) / 1000),
                        scroll_depth_at_click: maxScrollPercent
                    });
                });
            });

            // =========================================
            // 6. ë¹„ë””ì˜¤ ì¶”ì  (ì¬ìƒ/ì¼ì‹œì •ì§€/ì§„í–‰ë¥ /ì™„ë£Œ)
            // =========================================
            var video = document.querySelector('video');
            if (video) {
                var videoStarted = false;
                var videoProgressMarks = {25: false, 50: false, 75: false};

                video.addEventListener('play', function() {
                    trackFirstInteraction('video_play');
                    if (!videoStarted) {
                        trackEvent('video_start', {
                            time_to_play_sec: Math.round((Date.now() - pageLoadTime) / 1000)
                        });
                        videoStarted = true;
                    }
                });

                video.addEventListener('pause', function() {
                    if (!video.ended) {
                        trackEvent('video_pause', {
                            paused_at_sec: Math.round(video.currentTime),
                            video_percent: Math.round((video.currentTime / video.duration) * 100)
                        });
                    }
                });

                video.addEventListener('timeupdate', function() {
                    if (!video.duration) return;
                    var pct = Math.round((video.currentTime / video.duration) * 100);
                    [25, 50, 75].forEach(function(mark) {
                        if (pct >= mark && !videoProgressMarks[mark]) {
                            videoProgressMarks[mark] = true;
                            trackEvent('video_progress', {
                                milestone: mark + '%',
                                value: mark
                            });
                        }
                    });
                });

                video.addEventListener('ended', function() {
                    trackEvent('video_complete', {
                        duration_sec: Math.round(video.duration)
                    });
                });
            }

            // =========================================
            // 7. ìŠ¤í¬ë¡¤ ê¹Šì´ (10% ë‹¨ìœ„ ì„¸ë°€ ì¶”ì )
            // =========================================
            var scrollMarks = {};
            [10, 20, 30, 40, 50, 60, 70, 80, 90, 100].forEach(function(m) { scrollMarks[m] = false; });

            window.addEventListener('scroll', function() {
                var scrollTop = window.scrollY;
                var docHeight = document.documentElement.scrollHeight - window.innerHeight;
                if (docHeight <= 0) return;
                var pct = Math.round((scrollTop / docHeight) * 100);
                if (pct > maxScrollPercent) maxScrollPercent = pct;

                [10, 20, 30, 40, 50, 60, 70, 80, 90, 100].forEach(function(mark) {
                    if (pct >= mark && !scrollMarks[mark]) {
                        scrollMarks[mark] = true;
                        trackEvent('scroll_depth', {
                            percent: mark,
                            time_to_scroll_sec: Math.round((Date.now() - pageLoadTime) / 1000)
                        });
                    }
                });

                trackFirstInteraction('scroll');
            });

            // =========================================
            // 8. ê° ì„¹ì…˜ ì²´ë¥˜ ì‹œê°„ (ì–´ë””ì„œ ì˜¤ë˜ ë´¤ëŠ”ì§€)
            // =========================================
            var sectionNames = {
                '.hero': 'hero',
                '.space-info': 'space_info',
                '.video-section': 'video_section',
                '.rent-info': 'rent_info',
                '.cta': 'cta'
            };
            var sectionTimers = {};
            var sectionReported = {};

            Object.keys(sectionNames).forEach(function(selector) {
                var el = document.querySelector(selector);
                if (!el) return;
                var name = sectionNames[selector];
                sectionTimers[name] = 0;
                sectionReported[name] = false;

                var obs = new IntersectionObserver(function(entries) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) {
                            if (!sectionReported[name]) {
                                trackEvent('section_view', {
                                    section: name,
                                    time_to_view_sec: Math.round((Date.now() - pageLoadTime) / 1000)
                                });
                                sectionReported[name] = true;
                            }
                            el._viewStart = Date.now();
                        } else if (el._viewStart) {
                            sectionTimers[name] += Date.now() - el._viewStart;
                            el._viewStart = null;
                        }
                    });
                }, {threshold: 0.3});
                obs.observe(el);
            });

            // =========================================
            // 9. ì´ë¯¸ì§€ ëª¨ë‹¬ ì—´ê¸° ì¶”ì 
            // =========================================
            document.querySelectorAll('.gallery-item').forEach(function(item, idx) {
                item.addEventListener('click', function() {
                    var title = (this.querySelector('h4') || {}).textContent || '';
                    trackFirstInteraction('image_view');
                    trackEvent('image_modal_open', {
                        image_index: idx,
                        image_title: title
                    });
                });
            });

            // =========================================
            // 10. í…ìŠ¤íŠ¸ ë³µì‚¬ ì¶”ì  (ì „í™”ë²ˆí˜¸, ì£¼ì†Œ ë³µì‚¬)
            // =========================================
            document.addEventListener('copy', function() {
                var sel = window.getSelection().toString().trim();
                if (sel.length > 0) {
                    trackEvent('text_copy', {
                        copied_text: sel.substring(0, 100),
                        page_section: document.activeElement ? document.activeElement.closest('section') ?
                            document.activeElement.closest('section').className : 'unknown' : 'unknown'
                    });
                }
            });

            // =========================================
            // 11. ì²´ë¥˜ ì‹œê°„ ë§ˆì¼ìŠ¤í†¤ (ì‹¤ì œ í™œì„± ì‹œê°„)
            // =========================================
            activeInterval = setInterval(function() {
                if (isPageVisible) activeTime++;
            }, 1000);

            var timeMilestones = {15: false, 30: false, 60: false, 120: false, 300: false};
            setInterval(function() {
                [15, 30, 60, 120, 300].forEach(function(sec) {
                    if (activeTime >= sec && !timeMilestones[sec]) {
                        timeMilestones[sec] = true;
                        trackEvent('time_on_page', {
                            milestone_sec: sec,
                            milestone_label: sec < 60 ? sec + 's' : Math.round(sec / 60) + 'min',
                            max_scroll: maxScrollPercent
                        });
                    }
                });
            }, 1000);

            // =========================================
            // 12. í˜ì´ì§€ ê°€ì‹œì„± (íƒ­ ì „í™˜ ê°ì§€)
            // =========================================
            var hiddenStart = null;
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    isPageVisible = false;
                    hiddenStart = Date.now();
                } else {
                    isPageVisible = true;
                    if (hiddenStart) {
                        var hiddenDuration = Math.round((Date.now() - hiddenStart) / 1000);
                        trackEvent('tab_return', {
                            hidden_duration_sec: hiddenDuration
                        });
                        hiddenStart = null;
                    }
                }
            });

            // =========================================
            // 13. ì´íƒˆ ì˜ë„ ê°ì§€ (ë°ìŠ¤í¬íƒ‘: ë§ˆìš°ìŠ¤ê°€ ìœ„ë¡œ)
            // =========================================
            var exitIntentFired = false;
            document.addEventListener('mouseout', function(e) {
                if (exitIntentFired) return;
                if (e.clientY < 5 && e.relatedTarget == null) {
                    exitIntentFired = true;
                    trackEvent('exit_intent', {
                        time_on_page_sec: Math.round((Date.now() - pageLoadTime) / 1000),
                        max_scroll: maxScrollPercent,
                        phone_clicked: document.querySelector('a[href^="tel:"]._tracked') ? true : false
                    });
                }
            });

            // =========================================
            // 14. ë ˆì´ì§€ í´ë¦­ ê°ì§€ (ë¶ˆë§Œ/í˜¼ë€ í‘œì‹œ)
            // =========================================
            var clickTimes = [];
            document.addEventListener('click', function(e) {
                clickTimes.push(Date.now());
                // ìµœê·¼ 3ì´ˆ ì´ë‚´ í´ë¦­ë§Œ ìœ ì§€
                clickTimes = clickTimes.filter(function(t) { return Date.now() - t < 3000; });
                if (clickTimes.length >= 4) {
                    trackEvent('rage_click', {
                        click_count: clickTimes.length,
                        target_tag: e.target.tagName,
                        target_class: e.target.className.toString().substring(0, 50)
                    });
                    clickTimes = [];
                }
            });

            // =========================================
            // 15. í™”ë©´ ë°©í–¥ ë³€ê²½ ì¶”ì  (ëª¨ë°”ì¼)
            // =========================================
            window.addEventListener('orientationchange', function() {
                setTimeout(function() {
                    trackEvent('orientation_change', {
                        orientation: screen.orientation ? screen.orientation.type : 'unknown',
                        viewport_width: window.innerWidth,
                        viewport_height: window.innerHeight
                    });
                }, 100);
            });

            // =========================================
            // 16. í˜ì´ì§€ ì´íƒˆ ì‹œ ìµœì¢… ë°ì´í„° ì „ì†¡
            // =========================================
            function sendExitData() {
                // ë‚¨ì€ ì„¹ì…˜ íƒ€ì´ë¨¸ ì •ë¦¬
                Object.keys(sectionNames).forEach(function(selector) {
                    var el = document.querySelector(selector);
                    var name = sectionNames[selector];
                    if (el && el._viewStart) {
                        sectionTimers[name] += Date.now() - el._viewStart;
                        el._viewStart = null;
                    }
                });

                // ì„¹ì…˜ë³„ ì²´ë¥˜ì‹œê°„ ì „ì†¡
                var topSection = '';
                var topTime = 0;
                Object.keys(sectionTimers).forEach(function(name) {
                    var sec = Math.round(sectionTimers[name] / 1000);
                    if (sec > topTime) { topTime = sec; topSection = name; }
                });

                trackEvent('page_exit', {
                    total_time_sec: Math.round((Date.now() - pageLoadTime) / 1000),
                    active_time_sec: activeTime,
                    max_scroll: maxScrollPercent,
                    sections_viewed: Object.keys(sectionReported).filter(function(k) { return sectionReported[k]; }).length,
                    most_viewed_section: topSection,
                    most_viewed_sec: topTime,
                    visit_number: visitCount
                });

                // ê°œë³„ ì„¹ì…˜ ì²´ë¥˜ì‹œê°„
                Object.keys(sectionTimers).forEach(function(name) {
                    if (sectionTimers[name] > 0) {
                        trackEvent('section_dwell_time', {
                            section: name,
                            dwell_time_sec: Math.round(sectionTimers[name] / 1000)
                        });
                    }
                });
            }

            document.addEventListener('visibilitychange', function() {
                if (document.hidden) sendExitData();
            });
            window.addEventListener('pagehide', sendExitData);

        })();
    </script>
</body>
</html>
